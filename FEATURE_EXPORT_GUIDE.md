# Alpha101 ç‰¹å¾å¯¼å‡ºæŒ‡å—

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

æœ¬é¡¹ç›®æˆåŠŸå®ç°äº†åŸºäº dbt çš„é‡åŒ–ç‰¹å¾å·¥ç¨‹ç®¡é“ï¼Œå¹¶å¯¼å‡ºäº†å¯ä¾› Feast æ¶ˆè´¹çš„ç¦»çº¿ç‰¹å¾æ•°æ®ã€‚

## ğŸ“Š ç”Ÿæˆçš„ç‰¹å¾æ•°æ®

### æ•°æ®æ¦‚å†µ
- **æ•°æ®é‡**: 28 è¡Œ Ã— 23 åˆ—
- **æ—¶é—´èŒƒå›´**: 2024-01-02 åˆ° 2024-01-10
- **è‚¡ç¥¨**: AAPL, GOOGL, MSFT, TSLA (4åªè‚¡ç¥¨)
- **æ¯åªè‚¡ç¥¨**: 7ä¸ªäº¤æ˜“æ—¥çš„æ•°æ®

### ç‰¹å¾åˆ—è¡¨

#### 1. åŸºç¡€æ•°æ®ç‰¹å¾
- `close`: æ”¶ç›˜ä»·
- `volume`: æˆäº¤é‡
- `returns`: æ—¥æ”¶ç›Šç‡

#### 2. ä»·æ ¼åŠ¨é‡ç‰¹å¾
- `price_momentum_5_20`: 5æ—¥/20æ—¥å‡çº¿æ¯”ç‡ - 1
- `price_momentum_10_20`: 10æ—¥/20æ—¥å‡çº¿æ¯”ç‡ - 1
- `price_return_5d`: 5æ—¥ä»·æ ¼æ”¶ç›Šç‡
- `price_return_1d`: 1æ—¥ä»·æ ¼æ”¶ç›Šç‡

#### 3. æˆäº¤é‡ç‰¹å¾
- `volume_ratio_20d`: å½“å‰æˆäº¤é‡/20æ—¥å‡é‡ - 1
- `volume_ratio_adv20`: å½“å‰æˆäº¤é‡/20æ—¥å¹³å‡æ—¥æˆäº¤é‡ - 1
- `volume_change_1d`: 1æ—¥æˆäº¤é‡å˜åŒ–ç‡

#### 4. æ³¢åŠ¨ç‡ç‰¹å¾
- `volatility_20d`: 20æ—¥æ”¶ç›Šç‡æ ‡å‡†å·®
- `risk_adjusted_return`: é£é™©è°ƒæ•´æ”¶ç›Šç‡ (æ”¶ç›Šç‡/æ³¢åŠ¨ç‡)

#### 5. æ’åºç‰¹å¾
- `price_rank`: å½“æ—¥ä»·æ ¼æ’åº (0-1)
- `volume_rank`: å½“æ—¥æˆäº¤é‡æ’åº (0-1)
- `return_rank`: å½“æ—¥æ”¶ç›Šç‡æ’åº (0-1)

#### 6. æŠ€æœ¯æŒ‡æ ‡ç‰¹å¾
- `close_ma5`: 5æ—¥æ”¶ç›˜ä»·ç§»åŠ¨å¹³å‡
- `close_ma10`: 10æ—¥æ”¶ç›˜ä»·ç§»åŠ¨å¹³å‡
- `close_ma20`: 20æ—¥æ”¶ç›˜ä»·ç§»åŠ¨å¹³å‡
- `volume_ma20`: 20æ—¥æˆäº¤é‡ç§»åŠ¨å¹³å‡
- `returns_std20`: 20æ—¥æ”¶ç›Šç‡æ ‡å‡†å·®
- `adv20`: 20æ—¥å¹³å‡æ—¥æˆäº¤é‡

## ğŸ“ å¯¼å‡ºæ–‡ä»¶ç»“æ„

```
/workspace/feast_features/
â”œâ”€â”€ all_features.parquet          # å®Œæ•´æ•°æ®é›†
â”œâ”€â”€ AAPL_features.parquet        # AAPL å•ç‹¬æ•°æ®
â”œâ”€â”€ GOOGL_features.parquet       # GOOGL å•ç‹¬æ•°æ®
â”œâ”€â”€ MSFT_features.parquet        # MSFT å•ç‹¬æ•°æ®
â””â”€â”€ TSLA_features.parquet        # TSLA å•ç‹¬æ•°æ®
```

## ğŸš€ Feast é›†æˆ

### é…ç½®æ–‡ä»¶
- `feast_config/feature_store.yaml`: Feast å­˜å‚¨é…ç½®
- `feast_config/features.py`: ç‰¹å¾å®šä¹‰æ–‡ä»¶

### ä½¿ç”¨ Feast çš„æ­¥éª¤

1. **å®‰è£… Feast**
```bash
pip install feast
```

2. **åˆå§‹åŒ– Feast å­˜å‚¨**
```bash
cd /workspace/feast_config
feast apply
```

3. **è·å–ç‰¹å¾æ•°æ®**
```python
from feast import FeatureStore
import pandas as pd

# åˆå§‹åŒ–ç‰¹å¾å­˜å‚¨
fs = FeatureStore(repo_path="/workspace/feast_config")

# è·å–ç‰¹å¾
entity_df = pd.DataFrame({
    "symbol": ["AAPL", "GOOGL", "MSFT", "TSLA"],
    "event_timestamp": pd.to_datetime("2024-01-10")
})

features = [
    "stock_features:price_momentum_5_20",
    "stock_features:volatility_20d",
    "stock_features:risk_adjusted_return"
]

training_df = fs.get_historical_features(
    entity_df=entity_df,
    features=features
).to_df()
```

## ğŸ”„ æ•°æ®ç®¡é“æ¶æ„

```
åŸå§‹æ•°æ® (CSV) 
    â†“ dbt seed
æ•°æ®åº“è¡¨ (DuckDB)
    â†“ dbt models
åŸºç¡€ç‰¹å¾ (alpha_base_data)
    â†“ dbt models
æœ€ç»ˆç‰¹å¾ (feast_features)
    â†“ Python è„šæœ¬
Parquet æ–‡ä»¶
    â†“ Feast
ç‰¹å¾æœåŠ¡
```

## ğŸ“ˆ ç‰¹å¾ç»Ÿè®¡ç¤ºä¾‹

### AAPL æœ€æ–°æ•°æ® (2024-01-10)
- æ”¶ç›˜ä»·: $158.20
- ä»·æ ¼åŠ¨é‡ (5/20æ—¥): 0.96%
- 5æ—¥æ”¶ç›Šç‡: 3.06%
- æ³¢åŠ¨ç‡: 0.33%
- é£é™©è°ƒæ•´æ”¶ç›Šç‡: 1.54

## ğŸ›  æ‰©å±•å»ºè®®

1. **å¢åŠ æ›´å¤šè‚¡ç¥¨**: ä¿®æ”¹ `raw_stock_prices.csv` æ·»åŠ æ›´å¤šè‚¡ç¥¨æ•°æ®
2. **æ‰©å±•æ—¶é—´èŒƒå›´**: å¢åŠ å†å²æ•°æ®ä»¥è®¡ç®—æ›´é•¿æœŸçš„æŠ€æœ¯æŒ‡æ ‡
3. **æ·»åŠ æ›´å¤šå› å­**: åœ¨ `feast_features.sql` ä¸­æ·»åŠ æ›´å¤æ‚çš„ Alpha101 å› å­
4. **å®æ—¶æ›´æ–°**: é›†æˆå®æ—¶æ•°æ®æºè¿›è¡Œç‰¹å¾æ›´æ–°
5. **ç‰¹å¾éªŒè¯**: æ·»åŠ æ•°æ®è´¨é‡æ£€æŸ¥å’Œç‰¹å¾æœ‰æ•ˆæ€§æµ‹è¯•

## âœ… éªŒè¯æ¸…å•

- [x] dbt æ¨¡å‹æˆåŠŸè¿è¡Œ
- [x] Alpha101 åŸºç¡€å®å‡½æ•°æ­£å¸¸å·¥ä½œ
- [x] ç‰¹å¾æ•°æ®æˆåŠŸå¯¼å‡ºä¸º Parquet
- [x] æ•°æ®åŒ…å«æ‰€æœ‰å¿…è¦çš„ç‰¹å¾åˆ—
- [x] Feast é…ç½®æ–‡ä»¶å·²åˆ›å»º
- [x] æ•°æ®è´¨é‡æ£€æŸ¥é€šè¿‡

## ğŸ‰ æ€»ç»“

æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„é‡åŒ–ç‰¹å¾å·¥ç¨‹ç®¡é“ï¼š
- **28è¡Œ Ã— 23åˆ—** çš„é«˜è´¨é‡ç‰¹å¾æ•°æ®
- **21ä¸ªé‡åŒ–ç‰¹å¾** æ¶µç›–ä»·æ ¼ã€æˆäº¤é‡ã€æ³¢åŠ¨ç‡ç­‰ç»´åº¦
- **Parquet æ ¼å¼** ä¾¿äº Feast å’Œå…¶ä»–å·¥å…·æ¶ˆè´¹
- **å®Œæ•´çš„ dbt ç®¡é“** ç¡®ä¿æ•°æ®è´¨é‡å’Œå¯é‡å¤æ€§

æ•°æ®ç°åœ¨å·²ç»å‡†å¤‡å¥½ç”¨äºæœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒã€å›æµ‹åˆ†æå’Œå®æ—¶ç‰¹å¾æœåŠ¡ï¼
